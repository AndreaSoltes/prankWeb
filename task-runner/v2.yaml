template:
  version: 1
  id: v2
  urlPath: v2
  createOnGet: true
  mergeErrOutToStdOut: true
  newLocationHttpTemplate: ./analyze?database=v2&code={task}
  taskGetIdentificationTransformation: UpperCase
  steps:
    - name: 'prepare configuration'
      command: >-
        python3 /opt/p2rank-runtime/create_task_configuration.py
        --task ${_.id}
        --output "${_.working}/configuration.json"
    - name: 'p2rank'
      command: >-
        python3 /opt/p2rank-runtime/run_p2rank_task.py
        --p2rank /opt/p2rank/p2rank_2.1
        --input "${_.input}"
        --working "${_.working}"
        --output "${_.public}"
        --configuration "${_.working}/configuration.json"

